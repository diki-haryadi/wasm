<!DOCTYPE html>
<html>
<head>
    <title>Flappy Game</title>
</head>
<body>
<!--<script src="/static/wasm_exec.js"></script>-->
<script src="https://subjective-violet-centipede.myfilebase.com/ipfs/QmPv6UqEneyxiH83KaSq7QmEEH9RviFXf2Q1fbd5yiApiY.js"></script>
<!--<script>-->
<!--    const go = new Go();-->
<!--    WebAssembly.instantiateStreaming(fetch("https://subjective-violet-centipede.myfilebase.com/ipfs/QmZgg5QhKibs4HNMXVAx2dMh7SGTjtDQT4k6C4n4bGJfdh.wasm"), go.importObject).then(result => {-->
<!--        go.run(result.instance);-->
<!--    });-->
<!--</script>-->
<script>
    const chunkUrls = [
        "https://wasm.haryadi.my.id/wasm/chunk/0",
        "https://wasm.haryadi.my.id/wasm/chunk/1",
    ];

    const go = new Go();

    async function fetchAndInstantiateWasm() {
        let wasmArrayBuffer = [];

        // Fetch each chunk and combine them
        for (const url of chunkUrls) {
            const response = await fetch(url);
            const chunk = await response.arrayBuffer();
            wasmArrayBuffer.push(chunk);
        }

        // Combine the chunks into a single ArrayBuffer
        const wasmBuffer = new Uint8Array(wasmArrayBuffer.reduce((acc, chunk) => acc.concat(Array.from(new Uint8Array(chunk))), []));

        // Instantiate WebAssembly from the combined buffer
        const result = await WebAssembly.instantiate(wasmBuffer, go.importObject);
        go.run(result.instance);
    }

    fetchAndInstantiateWasm().catch(console.error);
</script>
</body>
</html>
